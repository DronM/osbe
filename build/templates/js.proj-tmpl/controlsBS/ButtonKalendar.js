/* Copyright (c) 2012 	Andrey Mikhalevich, Katren ltd.*//*		Description*///ф/** Requirements  * @requires common/functions.js  * @requires common/EventHandler.js  * @requires controls/Button.js  * @requires controls/KalendarDate.js*//* constructor */function ButtonKalendar(id,options){	options = options || {};		options.glyph = "glyphicon-calendar";	this.m_inputId = options.inputId;	options.attrs = options.attrs || {};	options.attrs.hint = options.attrs.hint || this.DEF_HINT;		this.m_datePattern = options.datePattern;		this.m_time = DateHandler.timeToMS(options.timeValueStr || "00:00:00");	this.m_onSelected = options.onSelected;		var self = this;	options.onClick = options.onClick || 			function(event){				//event = EventHandler.fixMouseEvent(event);				//var form = DOMHandler.getParentByTagName(event.target,"form");				var p = $("#"+self.m_inputId);				//var p = $(event.target);				p.datepicker({					format:self.m_datePattern,					/*					format:{						toDisplay: function (date, format, language) {							var d = new Date(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0,self.m_time);							return DateHandler.dateToStr(d,self.m_datePattern);						},						toValue: function (date, format, language) {							return DateHandler.strToDate(date);						}																},					*/										language:"ru",					daysOfWeekHighlighted:"0,6",					autoclose:true,					todayHighlight:true,					orientation: "bottom right",					//container:form,					showOnFocus:false					});					p.datepicker().on("hide", function(e) {						if (self.m_onSelected){							self.m_onSelected.call(self,e);						}					   });									p.datepicker("show");			};		ButtonKalendar.superclass.constructor.call(		this,id,options);}extend(ButtonKalendar,ButtonCtrl);ButtonKalendar.prototype.DEF_HINT = "открыть календарь";ButtonKalendar.prototype.DEF_ALT = "кал.";